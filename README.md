# User Activity Tracker

## Опис

Це PHP веб-додаток для трекінгу активностей користувачів (перегляди сторінок, кліки по кнопках тощо) з аналітикою, статистикою та адміністративними звітами. Архітектура побудована за принципами DDD та Clean Architecture. Додаток дозволяє:

- Реєструвати та автентифікувати користувачів
- Відстежувати перегляди сторінок і кліки по кнопках (наприклад, "Buy a cow" на Page A, "Download" на Page B)
- Переглядати статистику та звіти з фільтрами (дата, користувач, дія) та графіками (тільки для admin)
- Адмініструвати користувачів (створення admin через консоль)
- Очищати та наповнювати аналітику тестовими даними через консоль

---

## Швидкий старт

1. **Запустіть додаток однією командою:**
   ```bash
   docker-compose up --build
   ```
   - Всі залежності PHP та JS, міграції та збірка фронтенду виконуються автоматично при старті контейнера.
   - PHP: http://localhost:8080
   - MySQL: порт 3306 

---

## Консольні команди

Всі команди виконуються через:
```bash
docker-compose exec php php bin/console <command>
```

### 1. Створення адміністратора
```bash
php bin/console app:create-admin
```
- Створює нового користувача з роллю admin.
- Якщо користувач з таким email вже існує — команда не створить дубль.

### 2. Очищення аналітики
```bash
php bin/console analytics:flush
```
- Видаляє всі записи про активності користувачів.

### 3. Наповнення аналітики тестовими даними
```bash
php bin/console analytics:seed
```
- Додає 100 випадкових активностей для існуючих користувачів (логіни, кліки, перегляди сторінок тощо).

### 4. Doctrine Migrations (якщо потрібно)
```bash
php bin/console migrations:migrate
```
- Запускає міграції для оновлення структури БД.

---

## Структура проекту

- `src/` — основний код (Domain, Application, Infrastructure, Presentation)
- `public/` — публічні файли (index.php, assets)
- `assets/` — JS/CSS для Webpack Encore
- `templates/` — Twig шаблони
- `docker/` — Dockerfile, nginx конфіг, init.sql
- `tests/` — тести (Unit, Feature, Integration)

---

## Додатково

- **Nginx**: налаштований для роботи з PHP-FPM, захищає var/, .env, .ht* файли, кешує статику.
- **PHP**: 8.2, з усіма потрібними розширеннями, Composer, Yarn, Node.js.
- **Webpack Encore**: сучасний пайплайн для JS/CSS, всі скрипти збираються в `public/build/app.js`.
- **MySQL**: 8.0, всі дані зберігаються у volume.

---

_За деталями архітектури див. файл [ARCHITECTURE.md]._
